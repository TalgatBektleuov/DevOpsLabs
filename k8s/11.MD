# Create a secret 

```shell
$ kubectl create secret generic time-app-password --from-literal=username='talgat'
secret/time-app-password created
```

```shell
$ kubectl get secret time-app-password
NAME                TYPE     DATA   AGE
time-app-password   Opaque   2      35m

```

```shell
$ kubectl describe secret time-app-password
Name:         time-app-password
Namespace:    default
Labels:       <none>
Annotations:  <none>

Type:  Opaque

Data
====
password:  6 bytes
username:  6 bytes

```

```shell
$ kubectl get secret time-app-password -o jsonpath='{.data}'
{"password":"dGFsZ2F0","username":"dGFsZ2F0"}
```

```shell
$ kubectl get secret time-app-password --template={{.data.username}} | base64 -d
talgat
```

# Installing helm-secrets

```shell
$ helm plugin install https://github.com/jkroepke/helm-secrets --version v4.2.0
Installed plugin: secrets

```

```shell
$ gpg --gen-key
gpg (GnuPG) 2.2.19; Copyright (C) 2019 Free Software Foundation, Inc.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Замечание: "gpg --full-generate-key" вызывает полнофункциональный диалог создания ключа.

GnuPG должен составить идентификатор пользователя для идентификации ключа.

Ваше полное имя: Talgat
Адрес электронной почты: 
Вы выбрали следующий идентификатор пользователя:
    "Talgat"
....
pub   rsa3072 2022-11-15 [SC] [годен до: 2024-11-14]
      87E71BE890C8AC0978E17805995700B8BCAFE0E4
uid                      Talgat
sub   rsa3072 2022-11-15 [E] [годен до: 2024-11-14]

```

## Install sops

```shell
$ pip install sops
```

Unfortunately running sops failed and I couldn't resolve the problem. I couldn't find information on how to fix it in even google.

```shell
$ sops --encrypt --pgp 87E71BE890C8AC0978E17805995700B8BCAFE0E4 --in-place secret-data.yaml
PANIC: failed to load file into tree, got an empty tree
```

But normally, secret-data.yaml should have had secrets =))
